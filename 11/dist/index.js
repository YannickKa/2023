"use strict";
//--------------- Input section ----------------------//
const testInput = `...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#.....`.split("\n");
const testInputExpanded = `....#........
.........#...
#............
.............
.............
........#....
.#...........
............#
.............
.............
.........#...
#....#.......`.split("\n");
const realInput = `...................#.............#...........................................#..............................................................
.......................................#.........#..................................................................#.........#........#....
..........#........................................................#................#............#..........................................
...#.................................................#......................................#...............................................
.................#........................................#...............................................#.....#...........................
..............................#...........#.................................................................................................
...............................................#.....................................................................................#......
.............................................................#...........................#..................................................
....#..........#...............................................................#............................................................
................................#................................................................#................#.......................#.
...........................#.............#......................#......................................#....................#...............
#..........#..........#....................................#.............#..................................................................
....................................#..............#..........................................................#........#....................
..........................................................................................#.............................................#...
............................................#.......................#..........................#............................................
.......#...........................................................................#.......................#...................#............
................#...........#.........................#.....................................................................................
................................................#...................................................................#.................#.....
....#....................................................................................#..................................................
............#.......................................................................................#.......................................
...................................#...........................#................................................#...........................
.......#.........#......#....................................................#........................................#.....#...............
......................................................#......................................#..............................................
..#.............................#............#.........................................................#....................................
...........................................................#..........#...........................#........................................#
.............#....................................#.......................................#.........................#...............#.......
.............................#..............................................................................................................
......................#....................#...................#...........#.........#.....................................#................
....................................#..................#.......................................#............#............................#..
..................#.............................#......................................................#....................................
.......#.......................#.......................................#........................................#................#..........
...........................................................................................#................................................
.....................#...........................................................................#........#..................#.......#......
...............................................................#..................#.........................................................
....#.......................................#.............#..........#......................................................................
...........................................................................#............#........................#..........................
.........#...............................................................................................................#..................
..........................#......#..........................................................................................................
..............#..................................#................#.......................................#................................#
..........................................#.................#...................#..................#........................................
.....................................................................................................................................#......
.............................#......................#..................................#..............................#.....................
.....................................#.........................................................................#...........#................
........#..................................................................#................................................................
.#..........................................#........................................................#......................................
....................#..............................................................................................#........................
..........................#........#..........................#......................#...........................................#..........
.......................................................#....................................................................................
................#................................#...........................#...........#.........#...................................#....
......................................................................#.....................................................................
.......................#....................................#.....................#..........#..............................................
........................................#...................................................................................................
..........#..........................................................................................#...........#..........................
...#.........................#....................#.........................................................................................
........................................................................#................................................#..............#...
............................................................................................................................................
.......................#..............................#......#..........................#...................................................
.............................................................................#................................#.......#.....................
............................................................................................................................................
................#..................................#.........................................................................#............#.
...........................#.........#..............................#.....#........#................................................#.......
......................#.............................................................................#......#................................
.........#.....................................#........................................................................#...................
..............#................................................#...............................#............................................
.....#...........................#.....................................................................#....................................
....................................................................................#..............................................#........
............................#..............#.......#......................................#................................................#
...........#.............................................#................#.....#.....................................#.....................
....................#............................................................................#...........................#..............
...................................#.............................................................................#...................#......
....#.........#.....................................................#......................................#................................
.........................#......................#..........#................#...............................................................
...................................................................................#......#.................................................
.................#.............................................#............................................................................
.............................#.....................#.................................................#......................................
.........#.............#..................................................................................#........................#........
.......................................#.................................#.....................#......................#...................#.
...............................................#................................#...........................................................
..#....................................................#............#.............................................#...........#.............
............................................................................................................................................
....................................#..............#............#...........................................................................
...........#...................#........................................#.................#..............#.................................#
....................#...............................................................#...............#.......................................
...........................................#...................................#..............................#.......#.....................
......#..........................................#.........#.........#..........................#................................#..........
..............#.............................................................................................................................
............................................................................................................................................
...#...........................................................#.....................................#.....#..............#.................
............................................................................................................................................
........................................#.......#.........#..................#....................................#.......................#.
.....................................................................................................................................#......
.................#.....#........#..........................................................#.................#..............................
.....................................#.................#.................#...............................................#.....#............
.........................................................................................................#..................................
..................................................................#.........................................................................
..............................................#...........#....................#.........................................................#..
..................................#.........................................................................................................
..........#..........................................................................#.......................#.....#........................
.....#..............#.......#..................................#............................................................................
............................................#.................................................#............................#.......#........
..............#..........................................#.................................................................................#
..........................................................................#..........................#......................................
.................................#..............................................#......#....................................................
#.......#..................................................................................................#.....#......................#...
........................................#..........#........................................................................................
............................................................................................#..............................#................
...........................#..........................................#.....................................................................
....................#..........................#..................................................................................#.........
..........................................................#.............................#.......#.............#.............................
#......#........#...................#..............................#.................................................#......................
.........................#.................#..............................#....................................................#............
..............................#....................................................#................#.......................................
................................................................................................................#........#..................
...........#...........................#............#.......................................................................................
...................#.........................................................................#..............................................
...........................................................................#.........#..........................................#...........
..#.............................#..................................#..................................#.............#.......................
................#........#...............#..................................................................#........................#......
...........................................................................................#................................................
..................................................#......#.....................#............................................................
#.........................................................................................................................#.................
......#............#..........................#.............................................................................................
..............#........................................................................#..........................#.........................
................................#............................................................................................#..............
.......................#.........................#......................#..................#.............................................#..
..#.....................................................#.......................#................#.......#..................................
............................................................................................................................................
..............................................................#.............................................................................
...................#.....................#..........................................................................#..........#............
.........#..........................................................................................#.......................................
..........................#......#...............#.....#....................................................................................
.............#.........................................................#......................#.............................................
............................................................#..................#........................#................................#..
..................#....................................................................................................#........#...........
.....#.....................................................................#.................................#..............................
..................................................#.........................................................................................
.....................................#..............................................#........#......#...............................#.......
............................................................................................................................................
...........................#............................#..........#......................................................#.................
#............#.......#...................................................#.......................#..........................................`.split("\n");
const invertImage = function (image) {
    const inverseImage = [];
    for (let i = 0; i < image[0].length; i++) {
        let colStr = "";
        for (let j = 0; j < image.length; j++) {
            colStr += image[j].at(i);
        }
        inverseImage.push(colStr);
        colStr = "";
    }
    return inverseImage;
};
const expandRows = function (image) {
    const newLine = ".".repeat(image[0].length);
    for (let i = 0; i < image.length; i++) {
        if ([...image[i]].filter((a) => a === ".").length == image[i].length) {
            image = [...image.slice(0, i), newLine, ...image.slice(i)];
            i++;
        }
    }
    return image;
};
const expandColumns = function (image) {
    image = invertImage(image);
    image = expandRows(image);
    image = invertImage(image);
    return image;
};
const expandImage = function (image) {
    image = expandRows(image);
    image = expandColumns(image);
    return image;
};
const findExpandRows = function (image) {
    let expandRows = [];
    for (let i = 0; i < image.length; i++) {
        if ([...image[i]].filter((a) => a === ".").length == image[i].length) {
            expandRows.push(i);
        }
    }
    return expandRows;
};
const findExpandColumns = function (image) {
    image = invertImage(image);
    const expandColumns = findExpandRows(image);
    image = invertImage(image);
    return expandColumns;
};
const findExpandRowsAndColumns = function (image) {
    const expandRows = findExpandRows(image);
    const expandColumns = findExpandColumns(image);
    return [expandRows, expandColumns];
};
const findGalaxyInString = function (line) {
    const foundGalaxies = [...line.matchAll(new RegExp("#", "gi"))].map((a) => {
        const index = Number(a.index);
        return index;
    });
    return foundGalaxies;
};
const findGalaxies = function (image) {
    let galaxies = [];
    for (let i = 0; i < image.length; i++) {
        const foundGalaxies = findGalaxyInString(image[i]);
        foundGalaxies.forEach((galaxy) => {
            galaxies.push({ x: i, y: galaxy });
        });
    }
    return galaxies;
};
const getDistance = function (galaxies) {
    let answer = 0;
    for (let i = 0; i < galaxies.length; i++) {
        for (let j = i + 1; j < galaxies.length; j++) {
            const xdiff = Math.abs(galaxies[j].x - galaxies[i].x);
            const ydiff = Math.abs(galaxies[j].y - galaxies[i].y);
            answer += xdiff + ydiff;
        }
    }
    return answer;
};
const getBigDistance = function (galaxies, rows, columns, expandRate) {
    let answer = 0;
    for (let i = 0; i < galaxies.length; i++) {
        for (let j = i + 1; j < galaxies.length; j++) {
            const xmax = Math.max(galaxies[i].x, galaxies[j].x);
            const xmin = Math.min(galaxies[i].x, galaxies[j].x);
            const ymax = Math.max(galaxies[i].y, galaxies[j].y);
            const ymin = Math.min(galaxies[i].y, galaxies[j].y);
            let xdiff = xmax - xmin;
            let ydiff = ymax - ymin;
            rows.forEach((row) => {
                if (row > xmin && row < xmax) {
                    xdiff += expandRate - 1;
                }
            });
            columns.forEach((column) => {
                if (column > ymin && column < ymax) {
                    ydiff += expandRate - 1;
                }
            });
            answer += xdiff + ydiff;
        }
    }
    return answer;
};
//--------------- Code section ----------------------//
const input = realInput;
// const image = expandImage(input);
const [rows, columns] = findExpandRowsAndColumns(input);
const galaxies = findGalaxies(input);
// const answer = getDistance(galaxies);
const answer = getBigDistance(galaxies, rows, columns, 1000000);
// console.log(rows, columns);
console.log(answer);
